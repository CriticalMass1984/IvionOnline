#pragma once

#include <GRPC/GameState.pb.h>
#include <IOEngine/Util.hpp>

namespace IO {{

using MethodIter = google::protobuf::internal::RepeatedPtrIterator<{PACKAGE_NAME}::Method>;
using StringIter = google::protobuf::internal::RepeatedPtrIterator<std::__cxx11::string>;
class GameInstance;

google::protobuf::Message *ResolvePath(GameInstance* instance, IvionOnline::ObjectPath *obj);
template<typename T>
inline T* ResolvePath(GameInstance* instance, IvionOnline::ObjectPath *path) {{
    google::protobuf::Message* objPtr = ResolvePath(instance, path);
    assert(objPtr);
    auto* typedPtr = dynamic_cast<T*>(objPtr);
	while(typedPtr == nullptr)
	{{
		path = dynamic_cast<IvionOnline::ObjectPath*>(objPtr);
		assert(path);
		objPtr = ResolvePath(instance, path);
		typedPtr = dynamic_cast<T*>(objPtr);
	}}
	

    assert(typedPtr);
    return typedPtr;
}}
